<html>
	<head>
		<title>GTA:O Weather</title>
		<script src="gtatime.js"></script>
		<script>
			function secondsToMMSS(d) {
				var m = Math.floor(d % 3600 / 60);
				var s = Math.floor(d % 3600 % 60);
				return `${m.toString().padStart(2, "0")}:${s.toString().padStart(2, "0")}`;
			}

			window.onload = async () => {
				await initGTATime();
				let out = "";
				let current = new GTATime();
				out += `Game Time: [ ${current.hour.toString().padStart(2, "0")} : ${current.minute.toString().padStart(2, "0")} ]\n`;
				out += "\n";
				out += `Order  Duration    Type\n`;
				out += `   1.  [${secondsToMMSS(current.weather.timeslice.left)}]   ${current.weather.current}\n`;
				for(let i = 1; i < 10; i++) {
					current = new GTATime(current.unix_time + current.weather.timeslice.left);
					out += `${(i+1).toString().padStart(4, " ")}.  [${secondsToMMSS(current.weather.timeslice.left)}]   ${current.weather.current}\n`;
				}
				document.querySelector("#out").innerText = out;
			};
		</script>
	</head>
	<body>
		<pre id="out"></pre>
	</body>
</html>
